import { ReactNode } from "react";

export type Tier = "starter" | "trusted" | "reliable" | "elite";

interface UserBadgeProps {
    tier: Tier;
    /** sm = 20px, md = 32px, lg = 44px */
    size?: "xs"|"sm" | "md" | "lg";
    /** Show the text next to the badge */
    showLabel?: boolean;
    className?: string;
}

/** Map tier â†’ fill color (the only thing that changes) */
const tierFill: Record<Tier, string> = {
    starter: "#C42020",
    trusted: "#A2CEF5",
    reliable: "#EEA0A6",
    elite: "#D79E0F",
};

const sizeMap = {
    xs:10,
    sm: 16,
    md: 32,
    lg: 44,
};

export function UserBadge({
    tier,
    size = "sm",
    showLabel = false,
    className = "",
}: UserBadgeProps): ReactNode {
    const dim = sizeMap[size];
    const fill = tierFill[tier];

    const badge = (
        <svg
            width={dim}
            height={dim}
            viewBox="0 0 21 21"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            className={className}
            aria-label={`${tier} badge`}
        >
            <path
                d="M19.6744 8.13937C19.3209 7.77 18.9553 7.38938 18.8175 7.05469C18.69 6.74813 18.6825 6.24 18.675 5.74781C18.6609 4.83281 18.6459 3.79594 17.925 3.075C17.2041 2.35406 16.1672 2.33906 15.2522 2.325C14.76 2.3175 14.2519 2.31 13.9453 2.1825C13.6116 2.04469 13.23 1.67906 12.8606 1.32562C12.2137 0.704062 11.4787 0 10.5 0C9.52125 0 8.78719 0.704062 8.13937 1.32562C7.77 1.67906 7.38938 2.04469 7.05469 2.1825C6.75 2.31 6.24 2.3175 5.74781 2.325C4.83281 2.33906 3.79594 2.35406 3.075 3.075C2.35406 3.79594 2.34375 4.83281 2.325 5.74781C2.3175 6.24 2.31 6.74813 2.1825 7.05469C2.04469 7.38844 1.67906 7.77 1.32562 8.13937C0.704062 8.78625 0 9.52125 0 10.5C0 11.4787 0.704062 12.2128 1.32562 12.8606C1.67906 13.23 2.04469 13.6106 2.1825 13.9453C2.31 14.2519 2.3175 14.76 2.325 15.2522C2.33906 16.1672 2.35406 17.2041 3.075 17.925C3.79594 18.6459 4.83281 18.6609 5.74781 18.675C6.24 18.6825 6.74813 18.69 7.05469 18.8175C7.38844 18.9553 7.77 19.3209 8.13937 19.6744C8.78625 20.2959 9.52125 21 10.5 21C11.4787 21 12.2128 20.2959 12.8606 19.6744C13.23 19.3209 13.6106 18.9553 13.9453 18.8175C14.2519 18.69 14.76 18.6825 15.2522 18.675C16.1672 18.6609 17.2041 18.6459 17.925 17.925C18.6459 17.2041 18.6609 16.1672 18.675 15.2522C18.6825 14.76 18.69 14.2519 18.8175 13.9453C18.9553 13.6116 19.3209 13.23 19.6744 12.8606C20.2959 12.2137 21 11.4787 21 10.5C21 9.52125 20.2959 8.78719 19.6744 8.13937ZM14.7806 8.78063L9.53063 14.0306C9.46097 14.1004 9.37825 14.1557 9.2872 14.1934C9.19616 14.2312 9.09856 14.2506 9 14.2506C8.90144 14.2506 8.80384 14.2312 8.7128 14.1934C8.62175 14.1557 8.53903 14.1004 8.46937 14.0306L6.21937 11.7806C6.07864 11.6399 5.99958 11.449 5.99958 11.25C5.99958 11.051 6.07864 10.8601 6.21937 10.7194C6.36011 10.5786 6.55098 10.4996 6.75 10.4996C6.94902 10.4996 7.13989 10.5786 7.28063 10.7194L9 12.4397L13.7194 7.71937C13.7891 7.64969 13.8718 7.59442 13.9628 7.5567C14.0539 7.51899 14.1515 7.49958 14.25 7.49958C14.3485 7.49958 14.4461 7.51899 14.5372 7.5567C14.6282 7.59442 14.7109 7.64969 14.7806 7.71937C14.8503 7.78906 14.9056 7.87178 14.9433 7.96283C14.981 8.05387 15.0004 8.15145 15.0004 8.25C15.0004 8.34855 14.981 8.44613 14.9433 8.53717C14.9056 8.62822 14.8503 8.71094 14.7806 8.78063Z"
                fill={fill}
            />
        </svg>
    );

    if (!showLabel) return badge;

    return (
        <div className="inline-flex items-center gap-2">
            {badge}
            <span className="text-sm font-medium text-muted-foreground capitalize">
                {tier}
            </span>
        </div>
    );
}